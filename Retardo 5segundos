; PIC18F4550 Configuration Bit Settings

; Assembly source line config statements

#include <xc.inc>
  CONFIG  FOSC = INTOSC_HS      ; Oscillator Selection bits (Internal oscillator, HS oscillator used by USB (INTHS))
  CONFIG  WDT = OFF             ; Watchdog Timer Enable bit (WDT disabled (control is placed on the SWDTEN bit))
  CONFIG  LVP = OFF             ; Single-Supply ICSP Enable bit (Single-Supply ICSP disabled)

ORG 0x00
  CONTA_3  ;Se deifne los registros o en donde se guarda la informacion en el momento de hacer el flujo y tenga q hacerse el bucle
  CONTA_2
  CONTA_1
  
  
Puertosdeentrada
Inicio: 
    CLRF TRISB  ;
    CLRF LATB
    
    BCF TRISB,RB4 ;Se toma RB4 como puerto de salida.
    BCF LATB,RB4
    BSF LATB,RB4
    
Flujo
    
    BSF TRISB,RB4 ;Encendemos el led
    CALL Retardo_5s ; Se llama a la rutina de retardo de cinco segundos
    BCF TRISB,RB4 ; Se apaga el led
    CALL Retardo_2s ;Esperamos 2s
    GOTO Flujo ;Se repite el ciclo 
    
Retardo_5s   ;Subrutina retardo_5s
    MOVLW d'50' ; A W se le asigna el valor de 50 para iniciar el retardo 
    MOVWF CONTA_3 ; Se le asigna el valor de W a Conta_3
    
    MOVLW d'100' ;A W se le asigna el valor de 100 para iniciar el retardo
    MOVWF CONTA_2 ; Se le asigna el valor de W a Conta_2
    
    MOVLW d'250'  ; A W se le asigna el valor de 250 para iniciar el retardo
    MOVWF CONTA_1 ; Se le asigna el valor de W a Conta_1
    NOP
    
    DECFSZ CONTA_1,F 
    GOTO $-.2 
    DECFSZ CONTA_2,F 
    GOTO $-.6
    DECFSZ CONTA_3,F
    GOTO $-.10
    RETURN 
    
Retardo_2s   ;Subrutina retardo_5s
    MOVLW d'20' ; A W se le asigna el valor de 50 para iniciar el retardo 
    MOVWF CONTA_3 ; Se le asigna el valor de W a Conta_3
    
    MOVLW d'100'  ; A W se le asigna el valor de 100 para iniciar el retardo 
    MOVWF CONTA_2; Se le asigna el valor de W a Conta_2
    
    MOVLW d'250' ; A W se le asigna el valor de 250 para iniciar el retardo
    MOVWF CONTA_1  ; Se le asigna el valor de W a Conta_1
    NOP
    
    DECFSZ CONTA_1,F 
    GOTO $-.2 
    DECFSZ CONTA_2,F 
    GOTO $-.6
    DECFSZ CONTA_3,F
    GOTO $-.10
    RETURN 

END
