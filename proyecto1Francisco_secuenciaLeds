#include "p18f4550.inc"

  CONFIG  FOSC = INTOSC_EC
  CONFIG  PLLDIV = 1
  CONFIG  CPUDIV = OSC1_PLL2 
  CONFIG  WDT = OFF            
  CONFIG  LVP = OFF   

  
  ORG     0x00         ; Direcci√≥n de inicio

R_DELAY EQU 0x20       ; Registro para retardos
M_DELAY EQU 0x21
N_DELAY EQU 0x22

inicio:
    MOVLW 0x72  ; Configurar oscilador a 8 MHz
    MOVWF OSCCON         
    CLRF    TRISB        ; Configurar PORTB como salida
    CLRF    LATB         ; Apagar todos los pines de PORTB
    
loopGeneral:
    CLRF    LATB         ; Apagar todos los LEDs
    BSF     LATB, 0      ; Encender RB0
    MOVLW   D'10'
    MOVWF   R_DELAY
    CALL    RETARDO

    BCF     LATB, 0
    BSF     LATB, 1      ; Encender RB1
    MOVLW   D'10'
    MOVWF   R_DELAY
    CALL    RETARDO

    BCF     LATB, 1
    BSF     LATB, 2      ; Encender RB2
    MOVLW   D'10'
    MOVWF   R_DELAY
    CALL    RETARDO

    GOTO    loopGeneral  ; Repetir el ciclo

RETARDO:
TRES_LOOP:
    MOVLW   D'50'
    MOVWF   M_DELAY
DOS_LOOP:
    MOVLW   D'250'
    MOVWF   N_DELAY
UNO_LOOP:
    NOP
    NOP
    DECFSZ  N_DELAY,1
    GOTO    UNO_LOOP
    DECFSZ  M_DELAY,1
    GOTO    DOS_LOOP
    DECFSZ  R_DELAY,1
    GOTO    TRES_LOOP
    RETURN

    END
